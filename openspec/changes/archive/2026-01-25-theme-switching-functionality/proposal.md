# Change: 主题切换功能

## Why

当前应用使用固定的暗色主题，用户无法根据个人偏好或环境光线选择亮色主题，也缺少系统主题跟随能力。这限制了用户体验，尤其是在强光环境下使用亮色主题可以提高可读性。

## What Changes

- 添加完整的主题管理系统，支持亮色和暗色主题切换
- 添加主题切换 UI 组件（包含亮色、暗色两个选项）
- 实现主题持久化（使用 localStorage）
- 优化样式系统，确保所有 CSS 变量在两种主题下都有定义
- 集成 ThemeProvider 到应用入口，默认主题为暗色

## 影响范围

### 受影响的规范
- 新增：主题切换功能规范（theme-switching）

### 受影响的代码
- `src/index.css` - 优化主题变量定义
- `src/main.tsx` - 添加 ThemeProvider 包装
- `src/App.tsx` - 集成主题切换组件
- `src/contexts/theme-context.tsx` - 新增主题上下文
- `src/hooks/use-theme.tsx` - 新增主题管理 Hook
- `src/components/ui/theme-toggle.tsx` - 新增主题切换组件

## 技术实现

### 核心功能

1. **默认暗色主题**
   - 将现有的暗色主题样式作为默认主题
   - 确保所有现有 UI 组件在暗色模式下正常显示

2. **主题切换能力**
   - 添加亮色主题（light theme）样式定义
   - 提供主题切换控件（如切换按钮/开关）
   - 支持用户手动在亮色/暗色主题间切换

3. **主题持久化**
   - 使用 localStorage 保存用户的主题偏好
   - 页面刷新后自动恢复用户选择的主题

### 技术实现细节

- 使用 CSS 变量（CSS Custom Properties）定义主题令牌（颜色、间距等）
- 通过 data-attribute 或 class 切换主题状态
- 实现主题上下文（Theme Context）用于状态管理
- 确保主题切换过程平滑，避免视觉闪烁

## 预期效果

### 用户体验

- 提供更灵活的视觉体验，适应不同使用场景
- 改善在强光环境下的可读性（亮色主题）
- 尊重用户个性化偏好

### 技术架构

- 建立可扩展的主题系统，便于未来添加更多主题选项
- 提升样式代码的可维护性
- 与现有 UI 组件库（shadcn/ui）保持一致

### 兼容性

- 确保所有现有 UI 组件在两种主题下均正常工作
- 保持现有功能完整性，仅增强视觉效果
